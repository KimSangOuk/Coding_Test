< LV 1 >
[자동차 대여 기록에서 장기/단기 대여 구분하기]
SELECT HISTORY_ID, CAR_ID, DATE_FORMAT(START_DATE,'%Y-%m-%d') AS START_DATE, DATE_FORMAT(END_DATE,'%Y-%m-%d') AS END_DATE, IF(END_DATE-START_DATE>=30, '장기 대여','단기 대여') AS RENT_TYPE FROM CAR_RENTAL_COMPANY_RENTAL_HISTORY WHERE YEAR(START_DATE)=2022 AND MONTH(START_DATE)=9 ORDER BY HISTORY_ID DESC
- 오답 - IF의 사용방법과 DATEDIFF의 사용방법 지식을 처음 알았다.
[특정 옵션이 포함된 자동차 리스트 구하기]
SELECT * FROM CAR_RENTAL_COMPANY_CAR WHERE LOCATE('네비게이션',OPTIONS)!=0 ORDER BY CAR_ID DESC

< LV 2 >
[조건에 부합하는 중고거래 상태 조회하기]
SELECT BOARD_ID, WRITER_ID, TITLE, PRICE, CASE WHEN STATUS='SALE' THEN '판매중' WHEN STATUS='RESERVED' THEN '예약중' ELSE '거래완료' END AS STATUS FROM USED_GOODS_BOARD WHERE DATE_FORMAT(CREATED_DATE,'%Y-%m-%d')='2022-10-05' ORDER BY BOARD_ID DESC
[자동차 평균 대여 기간 구하기]
SELECT CAR_ID, ROUND(AVG(DATEDIFF(END_DATE,START_DATE)+1),1) AS AVERAGE_DURATION FROM CAR_RENTAL_COMPANY_RENTAL_HISTORY GROUP BY CAR_ID HAVING AVERAGE_DURATION>=7 ORDER BY AVERAGE_DURATION DESC, CAR_ID DESC
[루시와 엘라 찾기]
SELECT ANIMAL_ID, NAME, SEX_UPON_INTAKE FROM ANIMAL_INS WHERE NAME IN("Lucy","Ella","Pickle","Rogan","Sabrina","Mitty")
[이름에 el이 들어가는 동물 찾기]
SELECT ANIMAL_ID, NAME FROM ANIMAL_INS WHERE ANIMAL_TYPE IN("DOG") AND LOCATE("el",LOWER(NAME))!=0 ORDER BY  NAME
[중성화 여부 파악하기]
SELECT ANIMAL_ID, NAME, IF(LOCATE("Neutered",SEX_UPON_INTAKE)!=0 or LOCATE("Spayed",SEX_UPON_INTAKE)!=0,'O','X') AS '중성화' FROM ANIMAL_INS ORDER BY ANIMAL_ID
[DATETIME에서 DATE로 형 변환]
SELECT ANIMAL_ID, NAME, DATE_FORMAT(DATETIME,"%Y-%m-%d") AS '날짜' FROM ANIMAL_INS ORDER BY ANIMAL_ID
[카테고리 별 상품 개수 구하기]
SELECT LEFT(PRODUCT_CODE,2) AS CATEGORY, COUNT(*) FROM PRODUCT GROUP BY CATEGORY ORDER BY CATEGORY

< LV 3 >
[조회수가 가장 많은 중고거래 게시판의 첨부파일 조회하기]
SELECT CONCAT("/home/grep/src/",BOARD_ID,"/",FILE_ID,FILE_NAME,FILE_EXT) AS FILE_PATH FROM USED_GOODS_FILE WHERE BOARD_ID=(SELECT BOARD_ID FROM USED_GOODS_BOARD ORDER BY VIEWS DESC limit 1) ORDER BY FILE_ID DESC
[조건에 맞는 사용자 정보 조회하기]
SELECT USER_ID,NICKNAME,CONCAT(CITY," ",STREET_ADDRESS1," ",STREET_ADDRESS2) AS '전체주소', CONCAT(SUBSTRING(TLNO,1,3),'-',SUBSTRING(TLNO,4,4),'-',SUBSTRING(TLNO,8,4)) AS '전화번호' FROM USED_GOODS_USER WHERE USER_ID IN(SELECT WRITER_ID FROM USED_GOODS_BOARD GROUP BY WRITER_ID HAVING COUNT(*)>=3) ORDER BY USER_ID DESC
[조건별로 분류하여 주문상태 출력하기]
SELECT ORDER_ID, PRODUCT_ID, DATE_FORMAT(OUT_DATE,'%Y-%m-%d') AS OUT_DATE, CASE WHEN OUT_DATE<='2022-05-01' THEN '출고완료' WHEN OUT_DATE>'2022-05-01' THEN '출고대기' ELSE IFNULL(OUT_DATE,'출고미정') END AS '출고여부' FROM FOOD_ORDER ORDER BY ORDER_ID
[대여 기록이 존재하는 자동차 리스트 구하기]
SELECT CAR_ID FROM CAR_RENTAL_COMPANY_RENTAL_HISTORY WHERE CAR_ID IN(SELECT CAR_ID FROM CAR_RENTAL_COMPANY_CAR WHERE CAR_TYPE='세단') AND MONTH(START_DATE)=10 GROUP BY CAR_ID ORDER BY CAR_ID DESC
[오랜 기간 보호한 동물(2)]
SELECT ANIMAL_INS.ANIMAL_ID AS ANIMAL_ID,ANIMAL_INS.NAME AS NAME FROM ANIMAL_OUTS JOIN ANIMAL_INS ON ANIMAL_OUTS.ANIMAL_ID=ANIMAL_INS.ANIMAL_ID ORDER BY DATEDIFF(ANIMAL_OUTS.DATETIME,ANIMAL_INS.DATETIME) DESC limit 2

< LV 4 >
[자동차 대여 기록 별 대여 금액 구하기]
SELECT TB.HISTORY_ID, ROUND(B.DAILY_FEE*(100-IFNULL(DISCOUNT_RATE,0))/100*TB.DURATION,0) AS FEE FROM (CAR_RENTAL_COMPANY_CAR B JOIN (SELECT HISTORY_ID, CAR_ID, (DATEDIFF(END_DATE,START_DATE)+1) AS DURATION, CASE WHEN (DATEDIFF(END_DATE,START_DATE)+1)>=90 THEN '90일 이상' WHEN (DATEDIFF(END_DATE,START_DATE)+1)>=30 THEN '30일 이상' WHEN (DATEDIFF(END_DATE,START_DATE)+1)>=7 THEN '7일 이상' ELSE NULL END AS DURATION_TYPE FROM CAR_RENTAL_COMPANY_RENTAL_HISTORY A)TB ON B.CAR_ID=TB.CAR_ID) LEFT OUTER JOIN CAR_RENTAL_COMPANY_DISCOUNT_PLAN C ON B.CAR_TYPE=C.CAR_TYPE AND TB.DURATION_TYPE=C.DURATION_TYPE WHERE B.CAR_TYPE='트럭' ORDER BY FEE DESC, HISTORY_ID DESC
[취소되지 않은 진료 예약 조회하기]
SELECT A.APNT_NO,B.PT_NAME,A.PT_NO,A.MCDP_CD,C.DR_NAME,A.APNT_YMD FROM (SELECT APNT_YMD, APNT_NO,PT_NO,MCDP_CD,MDDR_ID FROM APPOINTMENT A WHERE DATE_FORMAT(APNT_YMD,'%Y-%m-%d') LIKE '2022-04-13%' AND MCDP_CD='CS' AND APNT_CNCL_YN='N')A LEFT OUTER JOIN PATIENT B ON A.PT_NO=B.PT_NO LEFT OUTER JOIN DOCTOR C ON A.MDDR_ID=C.DR_ID ORDER BY APNT_YMD